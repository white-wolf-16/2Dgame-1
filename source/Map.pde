class Map {
  PVector pos, diff, absDiff;
  PImage img;
  boolean block, demBlock;

  Map(String tile, PVector pos, boolean block, boolean demBlock){
    img = loadImage(tile);
    this.pos = pos;
    this.block = block;
    this.demBlock = demBlock;
  }

  void collision(Character p1){
    diff = PVector.sub(p1.pos, pos);
    absDiff = new PVector(abs(diff.x), abs(diff.y));
    if (block &&
    absDiff.x < p1.img.width/2+ img.width / 2 && 
    absDiff.y < p1.img.height/2 + img.height / 2) {
     p1.pos.x += diff.x*0.15;
     p1.pos.y += diff.y*0.15;
     p1.vel.mult(0.0);
    }
  }
  
  boolean inWindow(){
    if (absDiff.x < width && absDiff.y < height) {
      return true;
    }
    return false;
  }
  
  void dmnCollision(Character p1){
    diff = PVector.sub(p1.pos, pos);
    absDiff = new PVector(abs(diff.x), abs(diff.y));
    if (demBlock && 
    absDiff.x < p1.img.width / 2 + img.width / 2 &&
    absDiff.y < p1.img.height / 2 + img.height / 2){
     p1.pos.x += diff.x*1;
     p1.pos.y += diff.y*1;
     p1.vel.mult(-1);
     }
  }

  void drawMe(Character player){
    pushMatrix();
    translate( -player.pos.x + tileSize + player.img.width/2 + pos.x, 
     -player.pos.y + tileSize + player.img.height/2 + pos.y);

    scale(1.12, 1.12);
    image(img, -img.width/2, -img.height/2);
    popMatrix();
  }
}







//-----------------------The Map--------------------
int[][] map = {
{1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1},
{1,0,0,57,57,57,57,57,57,57,57,57,57,57,57,49,36,50,50,50,45,45,45,45,45,45,45,45,51,53,53,53,53,53,53,53,53,53,53,55,55,55,55,55,55,55,55,55,55,1},
{1,0,0,57,57,57,57,57,57,57,57,57,57,57,57,49,36,50,50,50,45,45,50,51,63,51,45,45,51,53,53,53,53,63,53,53,53,53,53,55,0,0,0,0,0,0,0,0,55,1},
{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,49,36,50,50,50,45,45,50,51,51,51,45,45,45,45,45,45,45,45,45,45,45,45,45,76,0,0,0,0,0,0,0,0,55,1},
{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,49,36,50,50,50,45,45,50,51,51,51,45,45,45,45,45,45,45,45,45,45,45,45,45,76,0,0,0,0,0,0,0,0,55,1},
{1,48,48,0,0,0,0,0,0,0,0,0,0,0,0,49,36,48,48,48,47,47,48,48,48,48,47,47,48,56,56,56,56,56,56,56,56,56,56,56,48,48,48,48,48,48,48,48,55,1},
{1,23,24,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,47,47,0,0,0,0,47,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,1},
{1,48,48,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,47,47,0,0,0,0,47,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,1},
{1,23,24,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,47,47,0,0,0,0,47,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,1},
{1,48,48,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,47,47,0,0,0,0,47,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,1},
{1,23,24,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,47,47,0,0,0,0,47,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,1},
{1,48,48,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,47,47,0,0,0,0,47,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,1},
{1,23,24,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,47,47,0,0,0,0,47,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,1},
{1,48,48,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,47,47,0,0,0,0,47,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,1},
{1,23,24,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,47,47,0,0,0,0,47,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,1},
{1,48,48,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,47,47,0,0,0,0,47,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,1},
{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,47,47,0,0,0,0,47,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,1},
{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,47,47,0,0,0,0,47,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,1},
{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,47,47,0,0,0,0,47,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,1},
{1,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,47,47,9,9,9,9,47,47,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,1},
{1,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,1},
{1,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,1},
{1,10,10,10,10,43,44,10,10,10,10,10,10,10,10,10,10,43,44,10,10,10,10,10,10,10,10,10,10,10,10,10,43,44,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,1},
{1,28,28,28,28,43,44,28,28,28,28,28,28,28,28,28,28,43,44,28,28,28,28,28,28,28,28,28,28,28,28,28,43,44,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,1},
{1,26,26,26,26,43,44,26,26,26,26,26,26,26,26,26,26,43,44,26,26,26,26,26,26,26,26,26,26,26,26,26,43,44,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,1},
{1,26,26,26,26,43,44,26,26,26,26,26,26,26,26,26,26,43,44,26,26,26,26,26,26,26,26,26,26,26,26,26,43,44,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,1},
{1,26,26,26,26,43,44,26,26,26,26,26,26,26,26,26,26,43,44,26,26,26,26,26,26,26,26,26,26,26,26,26,43,44,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,1},
{1,52,52,52,52,43,44,52,52,52,52,52,52,52,52,52,52,43,44,52,52,52,52,52,52,52,52,52,52,52,52,52,43,44,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,1},
{1,10,10,10,10,43,44,10,10,10,10,10,10,10,10,10,10,43,44,10,10,10,10,10,10,10,10,10,10,10,10,10,43,44,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,1},
{1,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,1},
{1,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,1},
{1,9,9,47,47,9,9,47,47,9,9,9,9,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,9,9,9,9,9,9,9,9,9,9,9,9,9,1},
{1,21,22,47,47,21,22,47,47,66,67,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,1},
{1,20,47,47,47,20,47,47,47,57,57,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,1},
{1,21,22,47,47,21,22,47,47,66,67,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,73,73,73,73,73,73,73,73,73,9,0,0,9,1},
{1,20,47,47,47,20,47,47,47,57,57,0,0,0,0,0,0,0,0,0,0,0,31,28,28,28,32,0,0,0,0,0,0,0,0,0,77,10,10,10,10,10,10,10,10,9,0,0,9,1},
{1,21,22,47,47,21,22,47,47,66,67,0,0,0,0,0,0,0,0,0,0,0,25,26,26,26,27,0,0,0,0,0,0,0,0,0,77,9,9,9,9,9,9,9,10,9,0,0,9,1},
{1,20,47,47,47,20,47,47,47,57,57,0,0,0,0,0,0,0,0,0,0,0,25,26,26,26,27,0,0,0,0,0,0,0,0,0,77,9,0,0,0,0,0,9,10,9,0,0,9,1},
{1,47,47,47,47,47,47,47,47,47,47,0,0,0,0,0,0,0,0,0,0,0,25,26,26,26,27,0,0,0,0,0,0,0,0,0,77,9,0,0,0,0,0,9,10,9,0,0,9,1},
{1,47,47,47,47,47,47,47,47,47,47,0,0,0,0,0,0,0,0,0,0,0,25,26,26,26,27,0,0,0,0,0,0,0,0,0,76,0,0,0,0,0,0,9,10,9,0,0,9,1},
{1,21,22,47,47,21,22,47,47,66,67,0,0,0,0,0,0,0,0,0,0,0,25,26,26,26,27,0,0,0,0,0,0,0,0,0,76,0,0,0,0,0,0,9,10,9,0,0,9,1},
{1,20,47,47,47,20,47,47,47,57,57,0,0,0,0,0,0,0,0,0,0,0,25,26,26,26,27,0,0,0,0,0,0,0,0,0,77,9,0,0,0,0,0,9,10,9,0,0,9,1},
{1,21,22,47,47,21,22,47,47,66,67,0,0,0,0,0,0,0,0,0,0,0,25,26,26,26,27,0,0,0,0,0,0,0,0,0,77,9,0,0,0,0,0,9,10,9,0,0,9,1},
{1,20,47,47,47,20,47,47,47,57,57,0,0,0,0,0,0,0,0,0,0,0,25,26,26,26,27,0,0,0,0,0,0,0,0,0,77,9,9,9,9,9,9,9,10,9,0,0,9,1},
{1,21,22,47,47,21,22,47,47,66,67,0,0,0,0,0,0,0,0,0,0,0,33,29,29,29,34,0,0,0,0,0,0,0,0,0,77,10,10,10,10,10,10,10,10,9,0,0,9,1},
{1,20,47,47,47,20,47,47,47,57,57,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,74,74,74,74,74,74,74,74,74,9,0,0,9,1},
{1,21,22,47,47,21,22,47,47,66,67,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,1},
{1,20,47,47,47,20,47,47,47,57,57,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,1},
{1,21,22,47,47,21,22,47,47,66,67,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,9,1},
{1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1}};
